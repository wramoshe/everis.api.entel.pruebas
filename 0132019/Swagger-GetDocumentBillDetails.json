{
  "swagger": "2.0",
  "info": {
    "title": "APIM-DocumentBillDetails",
    "description": "El propósito de este servicio (<SASS100361>) <GetDocumentBillDetails>Validación si existe el documento en BSCS y si existe trae los item del documento tributario.",
    "version": "1.0.0"
  },
  "host": "192.168.56.101:8080",
  "schemes": [
    "http"
  ],
  "paths": {
    "/EBM/v1/GetDocumentBillDetails": {
      "get": {
        "tags": [
          "DocumentBillDetails"
        ],
        "summary": "Verifica si existe documentos en BSCS y si existe trae los item del documento",
        "description": "\n# 1. Modo de Consumo\n\n| Tipo de Interfaz | Protocolo | Operacion | Ambiente | URI Exposicion                                                        |\n| ---------------- | --------- | --------- | -------- |:--------------------------------------------------------------------- |\n| REST/JSON        | HTTPS     | GET       | UAT      |https://apiinternaluat.entel.cl/legacy/customer/customerBill/v1/electronicBilling |\n|                  |           |           | PRD      | https://apiinternal.entel.cl/legacy/customer/customerBill/v1/electronicBilling    |\n\n# 2. Políticas de Acceso\n Esta API se encuentran protegida y utiliza como mecanismo de autenticación 2-legged OAuth 2.0 para todas las operaciones que la componen.\n Los parámetros client_id y client_secret debe ser obtenido a través de API Portal y ser enviado con las siguientes características para obtener el token de acceso.\n\n| Protocolo | Operacion | Ambiente | URI Exposicion                                      |\n| --------- | --------- | -------- |:----------------------------------------------------|\n| HTTPS     | POST      | UAT      | https://apiinternaluat.entel.cl/auth/oauth/v2/token |\n|           |           | PRD      | https://apiinternal.entel.cl/auth/oauth/v2/token    |\n\n*Request Body:\n*Content-Type: application/x-www-form-urlencoded\n\n| Campo               | Valor               | Descripción                              |\n| ------------------- | --------------------|:-----------------------------------------|\n| grant_type          | client_credentials  | Tipo de autenticación                    |\n| client_id           | {API Key}           | API Key de API Portal                    |\n| client_secret       | {Shared Secret}     | Shared secret de API Portal              |\n\n*Response Body:\n\n| Campo               | Valor               | Descripción                              |\n| ------------------- | --------------------|:-----------------------------------------|\n| access_token        | {token acceso}      | Código de token de acceso                |\n| token_type          | Bearer              | Tipo de token                            |\n| expires_in          | {minutos}           | Tiempo de duración del token (en minutos)|\n| scope               | {scope}             | Nivel de autorizacón (por defecto oob)   |\n\n# 3. Estructura de entrada (Request)\n## 3.1. Parametros Header\n\n| Campo            | Tipo              | Obligatorio | Descripcion                                                                                                                                                           | Valores posibles - Formato               | Valor Ejemplo                                      |\n| -----------------| ------------------| ----------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -----------------------------------------|:-------------------------------------------------- |\n| Content-Type     | string            | Si          | Indica el tipo de contenido del cuerpo del mensaje enviado al destinatario| application/json; charset=utf-8| application/json; charset=utf-8|\n| Authorization    | string            | Si          | Token de acceso alfanumerico obtenido de la autenticación OAuth| Bearer xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx  | Bearer dc53b3da-3e3c-4956-8b1c-17d8d78caf65|\n| applicationCode  | string| Si| Código único que representa al sistema consumidor. Es responsabilidad del consumidor enviar este valor| ATG (para ATG), XXX (para XXX)|XXX|\n| countryCode|string|Si|Identifica el país desde donde se origina la petición. Es responsabilidad del consumidor enviar este valor | CHL (Chile), PER (Perú)|CHL|\n| consumerId       | string            | Si          | Código único de identificación de la ejecución, que identifica el evento del consumidor. Es responsabilidad del consumir enviar este valor según las reglas definidas |*|0129OPER_00006201805071140101231000000000000001000 |\n| requestTimestamp | string (Datetime) | Si          | Fecha, hora y timezone en el cual se envía la petición del consumidor.|YYYY-MM-DDThh:mm:ss.sss-Z|2018-12-12T12:12:12.444-03:00|\n\n\n\n  \n# 4. Estructura de salida (Response)\n\n| Campo | Tipo | Descripcion |\n|---------------------------|----------|--------------------------------------------------------------------|\n| result | Object | Objeto con el status   de la llamada  |\n| result.transactionId | String | Id de transacción   generado por el API Management. |\n| result.code | integer | Código interno de   respuesta |\n| result.description | String | Descripción interno   de respuesta |\n| result.descriptionDetail | String | Descripción detallada   o acción a realizar |\n| result.responseTimestamp | dateTime | Fecha y hora de   respuesta del API Management |\n| CustomerBill| Object|  |\n| CustomerBill.itemGloss | String |  |\n| CustomerBill.billNoRef| String |  |\n| CustomerBill.characteristicConcept| String |  |\n| CustomerBill.billDateRef | String |  |\n| CustomerBill.netAmount| String |  |\n| CustomerBill.taxRate| String ||\n| CustomerBill.totalAmount| String ||\n| CustomerBill.spcode| String |  |\n| CustomerBill.npcode| String ||\n| CustomerBill.rpcode| String ||\n# 5.  Códigos de  retorno\n\nA continuacion los posibles codigos retornados para este servicio\n\n| Code Status  HTTP                    | Descripción HTTP                                                                              |\n|--------------------------------------|:----------------------------------------------------------------------------------------------|\n| 200 - OK                             | Respuesta estándar para peticiones correctas.                                                 |\n| 201 - CREADO                         | La petición ha sido completada y ha resultado en la creación de un nuevo recurso.             |\n| 400 - PETICIÓN INCORRECTA            | La solicitud contiene sintaxis errónea y no debería repetirse.                                |\n| 401 - NO AUTORIZADO                  | El token de autorización ingresado es inválido.                                               |\n| 404 - NO ENCONTRADO                  | Recurso no encontrado.                                                                        |\n| 405 - MÉTODO NO PERMITIDO            | Una petición fue hecha a una URI utilizando un método de solicitud no soportado por dicha URI |\n| 422 – ENTIDAD NO PROCESADA           | La solicitud está bien formada pero fue imposible seguirla debido a errores semánticos.       |\n| 429 - LIMITE DE SOLICITUDES EXCEDIDO | Se ha excedido el límite de solicitudes para un período de tiempo determinado .               | \n| 500 - ERROR EN EL SERVIDOR           | El servidor ha encontrado un error inesperado.                                                |\n",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "applicationCode",
            "in": "header",
            "description": "Código único que representa al sistema consumidor.",
            "required": true,
            "type": "string",
            "default": "ATG"
          },
          {
            "name": "consumerId",
            "in": "header",
            "description": "Código único de identificación de la ejecución, que identifica el evento del consumidor.",
            "required": true,
            "type": "string",
            "default": "1234"
          },
          {
            "name": "countryCode",
            "in": "header",
            "description": "Identifica el país desde donde se origina la petición.",
            "required": true,
            "type": "string",
            "default": "CHL"
          },
          {
            "name": "requestTimestamp",
            "in": "header",
            "description": "Fecha, hora y timezone en el cual se envía la petición del consumidor.",
            "required": true,
            "type": "string",
            "default": "2018-12-12T12:12:12.444-03:00"
          },
          {
            "name": "nameSociety",
            "in": "header",
            "description": "Estructura request a envíar.",
            "required": true,
            "type": "string",
            "default": "ENT"
          },
          {
            "name": "documentType",
            "in": "header",
            "description": "Estructura request a envíar.",
            "required": true,
            "type": "string",
            "default": "FS"
          },
          {
            "name": "documentNumber",
            "in": "header",
            "description": "Estructura request a envíar.",
            "required": true,
            "type": "string",
            "default": "Folio de documento"
          },
          {
            "name": "key",
            "in": "header",
            "description": "Estructura request a envíar.",
            "required": true,
            "type": "string",
            "default": "123"
          },
          {
            "name": "value",
            "in": "header",
            "description": "Estructura request a envíar.",
            "required": true,
            "type": "integer",
            "default": "123"
          }
        ],
        "responses": {
          "200": {
            "description": "OK - Operación concluida exitosa",
            "schema": {
              "$ref": "#/definitions/ResponseGetDocumentBillDetails"
            }
          },
          "400": {
            "description": "Error - Parámetros invalidos",
            "schema": {
              "$ref": "#/definitions/ResponseError400"
            }
          },
          "401": {
            "description": "Error - Error de autenticación",
            "schema": {
              "$ref": "#/definitions/ResponseError401"
            }
          },
          "404": {
            "description": "Error - Recurso no encontrado.",
            "schema": {
              "$ref": "#/definitions/ResponseError404"
            }
          },
          "405": {
            "description": "Error - Método no permitido",
            "schema": {
              "$ref": "#/definitions/ResponseError405"
            }
          },
          "422": {
            "description": "Error - Error de procesamiento de la solicitud",
            "schema": {
              "$ref": "#/definitions/ResponseError422"
            }
          },
          "429": {
            "description": "Error - Demasiadas solicitudes",
            "schema": {
              "$ref": "#/definitions/ResponseError429"
            }
          },
          "500": {
            "description": "Error - Error inesperado en el servidor",
            "schema": {
              "$ref": "#/definitions/ResponseError500"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "ResponseGetDocumentBillDetails": {
      "type": "object",
      "properties": {
        "result": {
          "type": "object",
          "properties": {
            "transactionId": {
              "type": "string",
              "title": "The Transactionid Schema ",
              "default": "",
              "example": "000001635079ff66-f25b"
            },
            "code": {
              "type": "string",
              "title": "The Code Schema ",
              "default": "",
              "example": 200
            },
            "description": {
              "type": "string",
              "title": "The Description Schema ",
              "default": "",
              "example": "OK"
            },
            "descriptionDetail": {
              "type": "string",
              "title": "The Descriptiondetail Schema ",
              "default": "",
              "example": "Procesamiento concluído exitosamente"
            },
            "responseTimestamp": {
              "type": "string",
              "title": "The Responsetimestamp Schema ",
              "default": "",
              "example": "2018/05/14T10:16:10.484"
            }
          }
        },
        "CustomerBill": {
          "type": "object",
          "properties": {
            "itemGloss": {
              "type": "string"
            },
            "billNoRef": {
              "type": "string"
            },
            "characteristicConcept": {
              "type": "string"
            },
            "billDateRef": {
              "type": "string"
            },
            "netAmount": {
              "type": "string"
            },
            "taxRate": {
              "type": "string"
            },
            "spcode": {
              "type": "string"
            },
            "npcode": {
              "type": "string"
            },
            "rpcode": {
              "type": "string"
            }
          }
        }
      }
    },
    "ResponseError400": {
      "properties": {
        "result": {
          "properties": {
            "code": {
              "example": 400,
              "type": "string"
            },
            "description": {
              "example": "Solicitud incorrecta",
              "type": "string"
            },
            "descriptionDetail": {
              "example": "La solicitud contiene sintaxis err\ufffdnea y no deber\ufffda repetirse.",
              "type": "string"
            },
            "responseTimestamp": {
              "example": "2018/05/10T17:49:56.080",
              "type": "string"
            },
            "transactionId": {
              "example": "0000016349eeab2d-2c9",
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "ResponseError401": {
      "properties": {
        "result": {
          "properties": {
            "code": {
              "example": 401,
              "type": "string"
            },
            "description": {
              "example": "No autorizado",
              "type": "string"
            },
            "descriptionDetail": {
              "example": "Error en la entrega del token de autorizaci\ufffdn.",
              "type": "string"
            },
            "responseTimestamp": {
              "example": "2018/05/10T17:49:56.080",
              "type": "string"
            },
            "transactionId": {
              "example": "0000016349eeab2d-2c9",
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "ResponseError404": {
      "properties": {
        "result": {
          "properties": {
            "code": {
              "example": 404,
              "type": "string"
            },
            "description": {
              "example": "No encontrado",
              "type": "string"
            },
            "descriptionDetail": {
              "example": "Recurso no encontrado.",
              "type": "string"
            },
            "responseTimestamp": {
              "example": "2018/05/10T17:49:56.080",
              "type": "string"
            },
            "transactionId": {
              "example": "0000016349eeab2d-2c9",
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "ResponseError405": {
      "properties": {
        "result": {
          "properties": {
            "code": {
              "example": 405,
              "type": "string"
            },
            "description": {
              "example": "Metodo no permitido",
              "type": "string"
            },
            "descriptionDetail": {
              "example": "Una petici\ufffdn fue hecha a una URI utilizando un m\ufffdtodo de solicitud no soportado por dicha URI.",
              "type": "string"
            },
            "responseTimestamp": {
              "example": "2018/05/10T17:49:56.080",
              "type": "string"
            },
            "transactionId": {
              "example": "0000016349eeab2d-2c9",
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "ResponseError422": {
      "properties": {
        "result": {
          "properties": {
            "code": {
              "example": 422,
              "type": "string"
            },
            "description": {
              "example": "Entidad no procesada",
              "type": "string"
            },
            "descriptionDetail": {
              "example": "La solicitud est\ufffd bien formada pero fue imposible seguirla debido a errores sem\ufffdnticos.",
              "type": "string"
            },
            "responseTimestamp": {
              "example": "2018/05/10T17:49:56.080",
              "type": "string"
            },
            "transactionId": {
              "example": "0000016349eeab2d-2c9",
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "ResponseError429": {
      "properties": {
        "result": {
          "properties": {
            "code": {
              "example": 429,
              "type": "string"
            },
            "description": {
              "example": "Demasiadas solicitudes",
              "type": "string"
            },
            "descriptionDetail": {
              "example": "Demasiadas solicitudes llegaron a la API.",
              "type": "string"
            },
            "responseTimestamp": {
              "example": "2018/05/10T17:49:56.080",
              "type": "string"
            },
            "transactionId": {
              "example": "0000016349eeab2d-2c9",
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "ResponseError500": {
      "properties": {
        "result": {
          "properties": {
            "code": {
              "example": 500,
              "type": "string"
            },
            "description": {
              "example": "Error en el servidor",
              "type": "string"
            },
            "descriptionDetail": {
              "example": "El servidor ha encontrado una error inesperado.",
              "type": "string"
            },
            "responseTimestamp": {
              "example": "2018/05/10T17:49:56.080",
              "type": "string"
            },
            "transactionId": {
              "example": "0000016349eeab2d-2c9",
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    }
  }
}